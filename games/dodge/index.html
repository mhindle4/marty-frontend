<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Dodge – Marty</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <link rel="icon" href="../../favicon.png" />
  <style>
    :root { color-scheme: dark; }
    body { margin: 0; background:#0b0c10; color:#eaf0f1; font-family: system-ui, Arial, sans-serif; touch-action: none; }
    nav { text-align:center; padding: 12px; }
    nav a { color:#66fcf1; text-decoration:none; margin: 0 8px; }
    #game { display:block; margin: 0 auto; width: 100vw; height: calc(100vh - 56px); background:#111417; }
    /* Mobile joystick */
    .pad {
      position: fixed; left: 18px; bottom: 18px; width: 120px; height: 120px;
      border-radius: 50%; border: 2px solid #2b2f36; background: rgba(15,15,20,.6);
      touch-action: none; user-select: none;
    }
    .stick {
      position: absolute; left: 50%; top: 50%; width: 56px; height: 56px; transform: translate(-50%,-50%);
      border-radius: 50%; background:#45a29e; opacity:.9;
    }
  </style>
</head>
<body>
  <nav>
    <a href="../../index.html">Home</a>
    <a href="../index.html">Games</a>
  </nav>

  <canvas id="game"></canvas>
  <div id="pad" class="pad" aria-hidden="true"><div id="stick" class="stick"></div></div>

  <!-- 1) Kaboom must load FIRST -->
  <script src="https://unpkg.com/kaboom/dist/kaboom.js"></script>

  <!-- 2) Your game code -->
  <script src="./game.js"></script>

  <!-- 3) Tiny diagnostics so we can see what's happening -->
  <script>
    console.log("[diag] window.kaboom =", typeof window.kaboom);
    try {
      // If kaboom loaded, calling it with no args returns a function (in older builds) or throws.
      console.log("[diag] kaboom type:", typeof kaboom);
    } catch (e) {
      console.warn("[diag] kaboom not callable:", e);
    }

    // Check whether the browser could fetch game.js (helps catch 404 / path issues)
    fetch("./game.js", { cache: "no-store" })
      .then(r => console.log("[diag] fetch game.js status:", r.status))
      .catch(err => console.warn("[diag] fetch game.js failed:", err));
  </script>
</body>
</html>
